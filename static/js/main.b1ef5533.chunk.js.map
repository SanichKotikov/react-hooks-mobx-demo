{"version":3,"sources":["app/components/Content/Content.module.css","app/components/Layout/Layout.module.css","client.ts","app/components/Header/Header.module.css","app/stores/StatusStore/StatusStore.ts","app/stores/StatusStore/index.ts","app/stores/UserStore/services.ts","app/stores/UserStore/index.ts","app/stores/UserStore/UserStore.ts","app/hooks/useUser.ts","app/contexts/ThemeContext.ts","app/providers/Theme.tsx","app/helpers/setTheme.ts","app/components/Content/index.ts","app/components/Content/Content.tsx","app/components/CurrentUser/index.ts","app/components/CurrentUser/CurrentUser.tsx","app/components/ThemeSelector/ThemeSelector.tsx","app/components/ThemeSelector/index.ts","app/components/Header/index.ts","app/components/Header/Header.tsx","app/components/Layout/index.ts","app/components/Layout/Layout.tsx","posts/routes/Posts/index.tsx","index.tsx","app/components/ThemeSelector/ThemeSelector.module.css","app/types.ts"],"names":["module","exports","root","header","main","get","_ref","Object","_Users_sancho_Work_test_react_hooks_mobx_demo_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_sancho_Work_test_react_hooks_mobx_demo_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","url","wrap","_context","prev","next","abrupt","fetch","then","resp","json","stop","_x","apply","this","arguments","__webpack_exports__","content","title","side","user","fsState","StatusStore","service","classCallCheck","initializerDefineProperty","_descriptor","state","Idle","Pending","_args","data","_this","Fulfilled","Rejected","Promise","reject","t0","observable","computed","action","services","fetchUser","asyncToGenerator","regenerator_default","client","sent","tPromise","IUser","stores_UserStore","UserStore","status","_descriptor2","onBecomeObserved","_this2","_ref2","slicedToArray","callback","runInAction","catch","error","console","log","store","React","createContext","uiThemeName","Light","DEFAULT_THEME","matchMedia","matches","Dark","Theme","observer","children","_useState","useState","_useState2","theme","updateTheme","onUpdateTheme","useCallback","useLayoutEffect","document","documentElement","setAttribute","setTheme","react_default","createElement","ThemeContext","Provider","value","Content","memo","className","classNames","styles","CurrentUser","name","THEMES","keys","ThemeSelector","onChange","map","key","button","onClick","Header","useUser","_useContext","useContext","components_Content","components_CurrentUser","components_ThemeSelector","Layout","components_Header","Loadable","loader","__webpack_require__","e","bind","loading","ReactDOM","render","providers_Theme","components_Layout","Posts","getElementById","d","io_ts__WEBPACK_IMPORTED_MODULE_0__","t","id"],"mappings":"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","file":"static/js/main.b1ef5533.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Content_root__qJ71I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Layout_root__3Jpa7\",\"header\":\"Layout_header__3qpxs\",\"main\":\"Layout_main__3R21F\"};","const API_URL = 'https://jsonplaceholder.typicode.com';\n\nconst get = async<T = any>(url: string): Promise<T> => (\n  fetch(API_URL + url).then(resp => resp.json())\n);\n\nexport default {\n  get,\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Header_root__2nBTP\",\"content\":\"Header_content__3nBtP\",\"title\":\"Header_title__W8kkr\",\"side\":\"Header_side__2HLyl\",\"user\":\"Header_user__2drLH\"};","import { observable, action, computed } from 'mobx';\n\nenum fsState {\n  Idle,\n  Pending,\n  Fulfilled,\n  Rejected,\n}\n\nclass StatusStore<R, A extends any[] = []> {\n\n  private readonly service: (...args: A) => Promise<R>;\n  @observable private state: fsState;\n\n  constructor(service: (...args: A) => Promise<R>) {\n    this.service = service;\n    this.state = fsState.Idle;\n  }\n\n  @computed get loading(): boolean {\n    return this.state === fsState.Pending;\n  }\n\n  @computed get success(): boolean {\n    return this.state === fsState.Fulfilled;\n  }\n\n  @computed get failure(): boolean {\n    return this.state === fsState.Rejected;\n  }\n\n  @action async fetch(...args: A): Promise<[R, () => void]> {\n    try {\n      this.state = fsState.Pending;\n      const data = await this.service(...args);\n      return [data, () => this.state = fsState.Fulfilled];\n    } catch (error) {\n      this.state = fsState.Rejected;\n      return Promise.reject(error);\n    }\n  }\n\n}\n\nexport default StatusStore;\n","import StatusStore from './StatusStore';\n\nexport default StatusStore;\n","import * as tPromise from 'io-ts-promise';\nimport client from '../../../client';\nimport { IUser } from '../../types';\n\nconst fetchUser = async () => {\n  const data = await client.get('/users/2');\n  return tPromise.decode(IUser, data);\n};\n\nexport default { fetchUser };\n","import UserStore from './UserStore';\n\nexport default new UserStore();\n","import { action, observable, onBecomeObserved, runInAction } from 'mobx';\nimport StatusStore from '../StatusStore';\nimport services from './services';\nimport { IUser } from '../../types';\n\nclass UserStore {\n\n  status: StatusStore<IUser>;\n  @observable user: IUser | null;\n\n  constructor() {\n    this.status = new StatusStore(services.fetchUser);\n    this.user = null;\n    onBecomeObserved(this, 'user', () => this.fetch());\n  }\n\n  @action fetch = () => (\n    this.status.fetch()\n      .then(([user, callback]) => runInAction(() => {\n        this.user = user;\n        callback();\n      }))\n      .catch((error) => {\n        console.log(error);\n      })\n  );\n\n}\n\nexport default UserStore;\n","import store from '../stores/UserStore';\n\nexport default () => {\n  return store;\n};\n","import React from 'react';\nimport { uiThemeName } from '../types';\n\ntype IThemeContext = [uiThemeName, (theme: uiThemeName) => void];\nexport default React.createContext<IThemeContext>([uiThemeName.Light, () => {}]);\n","import React, { useState, useCallback, useLayoutEffect } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport ThemeContext from '../contexts/ThemeContext';\nimport setTheme from '../helpers/setTheme';\nimport { uiThemeName } from '../types';\n\nconst DEFAULT_THEME =\n  matchMedia('(prefers-color-scheme: dark)').matches\n    ? uiThemeName.Dark\n    : uiThemeName.Light;\n\nconst Theme: React.FunctionComponent = observer(({ children }) => {\n  const [theme, updateTheme] = useState(DEFAULT_THEME);\n\n  const onUpdateTheme = useCallback((theme: uiThemeName) => {\n    updateTheme(theme);\n  }, []);\n\n  useLayoutEffect(() => {\n    setTheme(theme);\n  }, [theme]);\n\n  return (\n    <ThemeContext.Provider value={[theme, onUpdateTheme]}>\n      {children}\n    </ThemeContext.Provider>\n  );\n});\n\nexport default Theme;\n","import { uiThemeName } from '../types';\n\nexport default (theme: uiThemeName) => (\n  document.documentElement.setAttribute('theme', theme)\n);\n","import Content from './Content';\n\nexport default Content;\n","import React from 'react';\nimport classNames from 'classnames';\nimport styles from './Content.module.css';\n\ninterface Props {\n  className?: string;\n}\n\nconst Content: React.FunctionComponent<Props> = React.memo(\n  ({ className, children }) => (\n    <div className={classNames(styles.root, className)}>\n      {children}\n    </div>\n  )\n);\n\nexport default Content;\n","import CurrentUser from './CurrentUser';\n\nexport default CurrentUser;\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport classNames from 'classnames';\nimport { IUser } from '../../types';\n\ninterface Props {\n  user: IUser | null;\n  className?: string;\n}\n\nconst CurrentUser: React.FunctionComponent<Props> = observer(({ user, className }) => {\n  if (!user) return null;\n  return <div className={classNames(className)}>{user.name}</div>;\n});\n\nexport default CurrentUser;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { uiThemeName } from '../../types';\nimport styles from './ThemeSelector.module.css';\n\nconst THEMES = Object.keys(uiThemeName);\n\ninterface IProps {\n  className?: string;\n  onChange: (theme: uiThemeName) => void;\n}\n\nconst ThemeSelector: React.FunctionComponent<IProps> = React.memo(\n  ({ className, onChange }) => (\n    <div className={classNames(styles.root, className)}>\n      {THEMES.map((name: any) => (\n        <button\n          key={name}\n          className={styles.button}\n          onClick={() => onChange(uiThemeName[name] as uiThemeName)}\n        >\n          {name}\n        </button>\n      ))}\n    </div>\n  )\n);\n\nexport default ThemeSelector;\n","import ThemeSelector from './ThemeSelector';\n\nexport default ThemeSelector;\n","import Header from './Header';\n\nexport default Header;\n","import React, { useContext } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport classNames from 'classnames';\nimport Content from '../Content';\nimport CurrentUser from '../CurrentUser';\nimport ThemeSelector from '../ThemeSelector';\nimport ThemeContext from '../../contexts/ThemeContext';\nimport useUser from '../../hooks/useUser';\nimport styles from './Header.module.css';\n\ninterface Props {\n  className?: string;\n}\n\nconst Header: React.FunctionComponent<Props> = observer(({ className }) => {\n  const { user } = useUser();\n  const [, onUpdateTheme] = useContext(ThemeContext);\n\n  return (\n    <header className={classNames(styles.root, className)}>\n      <Content className={styles.content}>\n        <div className={styles.title}>Demo</div>\n        <div className={styles.side}>\n          <CurrentUser className={styles.user} user={user} />\n          <ThemeSelector onChange={onUpdateTheme} />\n        </div>\n      </Content>\n    </header>\n  );\n});\n\nexport default Header;\n","import Layout from './Layout';\n\nexport default Layout;\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport Header from '../Header';\nimport Content from '../Content';\nimport styles from './Layout.module.css';\n\nconst Layout: React.FunctionComponent = observer(({ children }) => {\n  return (\n    <div className={styles.root}>\n      <Header className={styles.header} />\n      <main className={styles.main}>\n        <Content>\n          {children}\n        </Content>\n      </main>\n    </div>\n  );\n});\n\nexport default Layout;\n","import React from 'react';\nimport Loadable from 'react-loadable';\n\nexport default Loadable({\n  loader: () => import(/* webpackChunkName: \"posts\" */ './Posts'),\n  loading: () => <div>Loading...</div>,\n});\n","import './index.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Theme from './app/providers/Theme';\nimport Layout from './app/components/Layout';\nimport Posts from './posts/routes/Posts';\n\nReactDOM.render(\n  <Theme>\n    <Layout>\n      <Posts />\n    </Layout>\n  </Theme>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ThemeSelector_root__3Ke2n\",\"button\":\"ThemeSelector_button__1CTn9\"};","import * as t from 'io-ts';\n\nexport enum uiThemeName {\n  Light = 'light',\n  Dark = 'dark',\n}\n\nexport const IUser = t.interface({\n  id: t.number,\n  name: t.string,\n});\n\nexport type IUser = t.TypeOf<typeof IUser>;\n"],"sourceRoot":""}