(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"3f5b60":function(e,t,n){e.exports={root:"_3gOJhAGP"}},"7fa5ce":function(e,t,n){e.exports={root:"_1ptYWwxx",post:"_2lnjKkBs"}},"9ea1d4":function(e,t,n){e.exports={root:"_3Hh370Di",title:"_3efqJP5_",body:"_1xNDSxg9"}},bd4786:function(e,t,n){"use strict";n.r(t);var a,o=n("8af190"),c=n.n(o),r=n("b91f72"),s=n("3f5b60"),l=n.n(s),i=c.a.memo((function({children:e}){return c.a.createElement("h1",{className:l.a.root},e)})),u=c.a.memo((function({onReload:e}){const[t,n]=Object(o.useState)(!1),a=Object(o.useCallback)(()=>{n(!0),e().catch(()=>n(!1))},[e]);return c.a.createElement("div",null,c.a.createElement("span",null,"Something went wrong, "),c.a.createElement("button",{disabled:t,onClick:a},"reload"))})),f=n("c036c7"),d=n("b912ec"),p=n.n(d),b=n("9ea1d4"),m=n.n(b),h=Object(r.a)((function({post:e,className:t}){return c.a.createElement("div",{className:p()(m.a.root,t)},c.a.createElement("h3",{className:m.a.title},e.title),c.a.createElement("p",{className:m.a.body},e.body))})),y=n("7fa5ce"),v=n.n(y),O=Object(r.a)((function({posts:e,className:t}){return c.a.createElement("div",{className:p()(v.a.root,t)},e.map(e=>c.a.createElement(h,{key:e.id,post:e,className:v.a.post})))}));!function(e){e[e.idle=0]="idle",e[e.loading=1]="loading",e[e.success=2]="success",e[e.failure=3]="failure"}(a||(a={}));var g=function(){const[e,t]=Object(o.useState)(a.idle),n=Object(o.useMemo)(()=>({load(){t(a.loading)},done(){t(a.success)},error(){t(a.failure)}}),[]);return{loading:e===a.loading,success:e===a.success,failure:e===a.failure,setState:n}},j=n("18abc8"),E=n("2bf77a"),w=n("ddd1e9"),x=n("06ba43");const P=E.readonly(E.interface({userId:E.number,id:E.number,title:E.string,body:E.string}));var k=function(e,t,n,a){return new(n||(n=Promise))((function(o,c){function r(e){try{l(a.next(e))}catch(e){c(e)}}function s(e){try{l(a.throw(e))}catch(e){c(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((a=a.apply(e,t||[])).next())}))};var N={fetchPosts:()=>k(void 0,void 0,void 0,(function*(){const e=yield x.a.get("/posts");return w.decode(E.array(P),e)}))},S=function(e,t,n,a){var o,c=arguments.length,r=c<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(c<3?o(r):c>3?o(t,n,r):o(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r},_=function(e,t,n,a){return new(n||(n=Promise))((function(o,c){function r(e){try{l(a.next(e))}catch(e){c(e)}}function s(e){try{l(a.throw(e))}catch(e){c(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((a=a.apply(e,t||[])).next())}))};class C{constructor(){this.fetch=()=>_(this,void 0,void 0,(function*(){const e=yield N.fetchPosts();Object(j.g)(()=>{e.forEach(e=>this.posts.set(e.id,e))})})),this.posts=j.f.map({})}}S([j.f],C.prototype,"posts",void 0),S([j.b],C.prototype,"fetch",void 0);var R=new C,J=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};var B=function(){const e=g(),{setState:t}=e,n=J(e,["setState"]);Object(o.useEffect)(()=>{t.load(),R.fetch().then(t.done).catch(t.error)},[t]);const a=Object(o.useCallback)(()=>R.fetch().then(t.done),[t]);return Object.assign(Object.assign({},n),{reload:a,posts:Array.from(R.posts.values())})},D=n("d08925"),I=n.n(D);function A(e,t,n){return t&&e.length&&n?e.filter(e=>e.userId===t.id):e}t.default=Object(r.a)((function(){const[e,t]=Object(o.useState)(!1),n=Object(o.useContext)(f.a),{loading:a,success:r,failure:s,reload:l,posts:d}=B(),p=Object(o.useCallback)(e=>t(e.target.checked),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:I.a.header},c.a.createElement(i,null,"Posts"),Boolean(n)&&c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",checked:e,onChange:p}),c.a.createElement("span",null,"Only my posts"))),a&&c.a.createElement("div",null,"Loading posts..."),s&&c.a.createElement(u,{onReload:l}),r&&c.a.createElement(O,{posts:A(d,n,e)}))}))},d08925:function(e,t,n){e.exports={header:"zGVB3LFj"}}}]);
//# sourceMappingURL=3.58a41f0a.chunk.js.map