{"version":3,"sources":["app/components/Header/Header.module.css","app/components/Layout/Layout.module.css","app/components/ThemeSelector/ThemeSelector.module.css","client.ts","app/stores/UserStore/services.ts","app/stores/UserStore/index.ts","app/stores/UserStore/UserStore.ts","app/hooks/useUser.ts","app/stores/StatusStore/StatusStore.ts","app/stores/StatusStore/index.ts","app/components/Content/Content.module.css","app/types.ts","app/contexts/ThemeContext.ts","app/providers/Theme.tsx","app/helpers/setTheme.ts","app/components/Content/index.ts","app/components/Content/Content.tsx","app/components/CurrentUser/index.ts","app/components/CurrentUser/CurrentUser.tsx","app/components/ThemeSelector/ThemeSelector.tsx","app/components/ThemeSelector/index.ts","app/components/Header/index.ts","app/components/Header/Header.tsx","app/components/Layout/index.ts","app/components/Layout/Layout.tsx","posts/routes/Posts/index.tsx","index.tsx"],"names":["module","exports","root","content","title","side","user","header","main","button","get","_ref","Object","_Users_sancho_Work_test_react_hooks_mobx_demo_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_sancho_Work_test_react_hooks_mobx_demo_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","url","wrap","_context","prev","next","abrupt","fetch","then","resp","json","stop","_x","apply","this","arguments","__webpack_exports__","services","client","stores_UserStore","UserStore","_this","classCallCheck","status","initializerDefineProperty","_descriptor","_descriptor2","StatusStore","onBecomeObserved","observable","action","_this2","_ref2","slicedToArray","callback","runInAction","store","fsState","service","state","Idle","Pending","_args","data","Fulfilled","Rejected","Promise","reject","t0","computed","uiThemeName","React","createContext","Light","DEFAULT_THEME","matchMedia","matches","Dark","Theme","observer","children","_useState","useState","_useState2","theme","updateTheme","onUpdateTheme","useCallback","useLayoutEffect","document","documentElement","setAttribute","setTheme","react_default","createElement","ThemeContext","Provider","value","Content","memo","className","classNames","styles","CurrentUser","name","THEMES","keys","ThemeSelector","onChange","map","key","onClick","Header","useUser","_useContext","useContext","components_Content","components_CurrentUser","components_ThemeSelector","Layout","components_Header","Loadable","loader","__webpack_require__","e","bind","loading","ReactDOM","render","providers_Theme","components_Layout","Posts","getElementById"],"mappings":"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","file":"static/js/main.ce9426b7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Header_root__2nBTP\",\"content\":\"Header_content__3nBtP\",\"title\":\"Header_title__W8kkr\",\"side\":\"Header_side__2HLyl\",\"user\":\"Header_user__2drLH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Layout_root__3Jpa7\",\"header\":\"Layout_header__3qpxs\",\"main\":\"Layout_main__3R21F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ThemeSelector_root__3Ke2n\",\"button\":\"ThemeSelector_button__1CTn9\"};","const API_URL = 'https://jsonplaceholder.typicode.com';\n\nconst get = async(url: string) => (\n  fetch(API_URL + url).then(resp => resp.json())\n);\n\nexport default {\n  get,\n};\n","import client from '../../../client';\nimport { IUser } from '../../types';\n\nconst fetchUser = (): Promise<IUser> => client.get('/users/2');\n\nexport default { fetchUser };\n","import UserStore from './UserStore';\n\nexport default new UserStore();\n","import { action, observable, onBecomeObserved, runInAction } from 'mobx';\nimport StatusStore from '../StatusStore';\nimport services from './services';\nimport { IUser } from '../../types';\n\nclass UserStore {\n\n  status: StatusStore<IUser>;\n  @observable user: IUser | null;\n\n  constructor() {\n    this.status = new StatusStore(services.fetchUser);\n    this.user = null;\n    onBecomeObserved(this, 'user', () => this.fetch());\n  }\n\n  @action fetch = () => (\n    this.status.fetch()\n      .then(([user, callback]) => runInAction(() => {\n        this.user = user;\n        callback();\n      }))\n  );\n\n}\n\nexport default UserStore;\n","import store from '../stores/UserStore';\n\nexport default () => {\n  return store;\n};\n","import { observable, action, computed } from 'mobx';\n\nenum fsState {\n  Idle,\n  Pending,\n  Fulfilled,\n  Rejected,\n}\n\nclass StatusStore<R, A extends any[] = []> {\n\n  private readonly service: (...args: A) => Promise<R>;\n  @observable private state: fsState;\n\n  constructor(service: (...args: A) => Promise<R>) {\n    this.service = service;\n    this.state = fsState.Idle;\n  }\n\n  @computed get loading(): boolean {\n    return this.state === fsState.Pending;\n  }\n\n  @computed get success(): boolean {\n    return this.state === fsState.Fulfilled;\n  }\n\n  @computed get failure(): boolean {\n    return this.state === fsState.Rejected;\n  }\n\n  @action async fetch(...args: A): Promise<[R, () => void]> {\n    try {\n      this.state = fsState.Pending;\n      const data = await this.service(...args);\n      return [data, () => this.state = fsState.Fulfilled];\n    } catch (error) {\n      this.state = fsState.Rejected;\n      return Promise.reject(error);\n    }\n  }\n\n}\n\nexport default StatusStore;\n","import StatusStore from './StatusStore';\n\nexport default StatusStore;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Content_root__qJ71I\"};","export enum uiThemeName {\n  Light = 'light',\n  Dark = 'dark',\n}\n\nexport interface IUser {\n  id: number;\n  name: string;\n}\n","import React from 'react';\nimport { uiThemeName } from '../types';\n\ntype IThemeContext = [uiThemeName, (theme: uiThemeName) => void];\nexport default React.createContext<IThemeContext>([uiThemeName.Light, () => {}]);\n","import React, { useState, useCallback, useLayoutEffect } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport ThemeContext from '../contexts/ThemeContext';\nimport setTheme from '../helpers/setTheme';\nimport { uiThemeName } from '../types';\n\nconst DEFAULT_THEME =\n  matchMedia('(prefers-color-scheme: dark)').matches\n    ? uiThemeName.Dark\n    : uiThemeName.Light;\n\nconst Theme: React.FunctionComponent = observer(({ children }) => {\n  const [theme, updateTheme] = useState(DEFAULT_THEME);\n\n  const onUpdateTheme = useCallback((theme: uiThemeName) => {\n    updateTheme(theme);\n  }, []);\n\n  useLayoutEffect(() => {\n    setTheme(theme);\n  }, [theme]);\n\n  return (\n    <ThemeContext.Provider value={[theme, onUpdateTheme]}>\n      {children}\n    </ThemeContext.Provider>\n  );\n});\n\nexport default Theme;\n","import { uiThemeName } from '../types';\n\nexport default (theme: uiThemeName) => (\n  document.documentElement.setAttribute('theme', theme)\n);\n","import Content from './Content';\n\nexport default Content;\n","import React from 'react';\nimport classNames from 'classnames';\nimport styles from './Content.module.css';\n\ninterface Props {\n  className?: string;\n}\n\nconst Content: React.FunctionComponent<Props> = React.memo(\n  ({ className, children }) => (\n    <div className={classNames(styles.root, className)}>\n      {children}\n    </div>\n  )\n);\n\nexport default Content;\n","import CurrentUser from './CurrentUser';\n\nexport default CurrentUser;\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport classNames from 'classnames';\nimport { IUser } from '../../types';\n\ninterface Props {\n  user: IUser | null;\n  className?: string;\n}\n\nconst CurrentUser: React.FunctionComponent<Props> = observer(({ user, className }) => {\n  if (!user) return null;\n  return <div className={classNames(className)}>{user.name}</div>;\n});\n\nexport default CurrentUser;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { uiThemeName } from '../../types';\nimport styles from './ThemeSelector.module.css';\n\nconst THEMES = Object.keys(uiThemeName);\n\ninterface IProps {\n  className?: string;\n  onChange: (theme: uiThemeName) => void;\n}\n\nconst ThemeSelector: React.FunctionComponent<IProps> = React.memo(\n  ({ className, onChange }) => (\n    <div className={classNames(styles.root, className)}>\n      {THEMES.map((name: any) => (\n        <button\n          key={name}\n          className={styles.button}\n          onClick={() => onChange(uiThemeName[name] as uiThemeName)}\n        >\n          {name}\n        </button>\n      ))}\n    </div>\n  )\n);\n\nexport default ThemeSelector;\n","import ThemeSelector from './ThemeSelector';\n\nexport default ThemeSelector;\n","import Header from './Header';\n\nexport default Header;\n","import React, { useContext } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport classNames from 'classnames';\nimport Content from '../Content';\nimport CurrentUser from '../CurrentUser';\nimport ThemeSelector from '../ThemeSelector';\nimport ThemeContext from '../../contexts/ThemeContext';\nimport useUser from '../../hooks/useUser';\nimport styles from './Header.module.css';\n\ninterface Props {\n  className?: string;\n}\n\nconst Header: React.FunctionComponent<Props> = observer(({ className }) => {\n  const { user } = useUser();\n  const [, onUpdateTheme] = useContext(ThemeContext);\n\n  return (\n    <header className={classNames(styles.root, className)}>\n      <Content className={styles.content}>\n        <div className={styles.title}>Demo</div>\n        <div className={styles.side}>\n          <CurrentUser className={styles.user} user={user} />\n          <ThemeSelector onChange={onUpdateTheme} />\n        </div>\n      </Content>\n    </header>\n  );\n});\n\nexport default Header;\n","import Layout from './Layout';\n\nexport default Layout;\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport Header from '../Header';\nimport Content from '../Content';\nimport styles from './Layout.module.css';\n\nconst Layout: React.FunctionComponent = observer(({ children }) => {\n  return (\n    <div className={styles.root}>\n      <Header className={styles.header} />\n      <main className={styles.main}>\n        <Content>\n          {children}\n        </Content>\n      </main>\n    </div>\n  );\n});\n\nexport default Layout;\n","import React from 'react';\nimport Loadable from 'react-loadable';\n\nexport default Loadable({\n  loader: () => import(/* webpackChunkName: \"posts\" */ './Posts'),\n  loading: () => <div>Loading...</div>,\n});\n","import './index.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Theme from './app/providers/Theme';\nimport Layout from './app/components/Layout';\nimport Posts from './posts/routes/Posts';\n\nReactDOM.render(\n  <Theme>\n    <Layout>\n      <Posts />\n    </Layout>\n  </Theme>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}