{"version":3,"sources":["app/components/Title/Title.module.css","posts/components/Post/Post.module.css","posts/components/PostsList/PostsList.module.css","posts/routes/Posts/Posts.module.css","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","app/components/Title/index.ts","app/components/Title/Title.tsx","posts/components/Post/index.ts","posts/components/Post/Post.tsx","posts/components/PostsList/index.ts","posts/components/PostsList/PostsList.tsx","posts/stores/PostsStore/services.ts","posts/stores/PostsStore/index.ts","posts/stores/PostsStore/PostsStore.ts","posts/routes/Posts/Posts.tsx","posts/hooks/usePosts.ts"],"names":["module","exports","root","title","body","post","header","_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","Symbol","iterator","Object","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","Title","React","memo","_ref","children","react_default","a","createElement","className","styles","Post","observer","classNames","PostsList","posts","loading","map","components_Post","key","id","services","client","get","stores_PostsStore","PostsStore","classCallCheck","this","status","initializerDefineProperty","_descriptor","_descriptor2","StatusStore","observable","action","_this","fetch","then","_ref2","slicedToArray","callback","runInAction","forEach","set","filterPosts","user","onlyMy","filter","userId","Posts","_useState","useState","_useState2","setOnlyMy","useUser","_usePosts","useEffect","store","catch","onOnlyMyChange","useCallback","event","target","checked","components_Title","Boolean","type","onChange","components_PostsList","values"],"mappings":"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","file":"static/js/posts.a4fe355b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Title_root__2BL1A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Post_root__1O5J7\",\"title\":\"Post_title__2qNB4\",\"body\":\"Post_body__4XA6I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"PostsList_root__23Sv4\",\"post\":\"PostsList_post__sRbXi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Posts_header__TkvBH\"};","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import Title from './Title';\n\nexport default Title;\n","import React from 'react';\nimport styles from './Title.module.css';\n\nconst Title: React.FunctionComponent = React.memo(\n  ({ children }) => (\n    <h1 className={styles.root}>{children}</h1>\n  )\n);\n\nexport default Title;\n","import Post from './Post';\n\nexport default Post;\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport classNames from 'classnames';\nimport { IPost } from '../../types';\nimport styles from './Post.module.css';\n\ninterface IProps {\n  post: IPost;\n  className?: string;\n}\n\nconst Post: React.FunctionComponent<IProps> = observer(\n  ({ post, className }) => (\n    <div className={classNames(styles.root, className)}>\n      <h3 className={styles.title}>\n        {post.title}\n      </h3>\n      <p className={styles.body}>\n        {post.body}\n      </p>\n    </div>\n  )\n);\n\nexport default Post;\n","import PostsList from './PostsList';\n\nexport default PostsList;\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport classNames from 'classnames';\nimport Post from '../Post';\nimport { IPost } from '../../types';\nimport styles from './PostsList.module.css';\n\ninterface IProps {\n  posts: IPost[];\n  loading: boolean;\n  className?: string;\n}\n\nconst PostsList: React.FunctionComponent<IProps> = observer(\n  ({ posts, loading, className }) => (\n    <div className={classNames(styles.root, className)}>\n      {posts.map(post => (\n        <Post\n          key={post.id}\n          post={post}\n          className={styles.post}\n        />\n      ))}\n      {loading && <div>Loading...</div>}\n    </div>\n  )\n);\n\nexport default PostsList;\n","import client from '../../../client';\nimport { IPost } from '../../types';\n\nconst fetchPosts = (): Promise<IPost[]> => client.get('/posts');\n\nexport default { fetchPosts };\n","import PostsStore from './PostsStore';\n\nexport default new PostsStore();\n","import { action, observable, ObservableMap, runInAction } from 'mobx';\nimport StatusStore from '../../../app/stores/StatusStore';\nimport services from './services';\nimport { IPost } from '../../types';\n\nclass PostsStore {\n\n  status: StatusStore<IPost[]>;\n  @observable posts: ObservableMap<number, IPost>;\n\n  constructor() {\n    this.status = new StatusStore(services.fetchPosts);\n    this.posts = observable.map({});\n  }\n\n  @action fetch = () => (\n    this.status.fetch()\n      .then(([posts, callback]) => runInAction(() => {\n        posts.forEach(post => this.posts.set(post.id, post));\n        callback();\n      }))\n  );\n\n}\n\nexport default PostsStore;\n","import React, { useState, useCallback } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport Title from '../../../app/components/Title';\nimport PostsList from '../../components/PostsList';\nimport useUser from '../../../app/hooks/useUser';\nimport usePosts from '../../hooks/usePosts';\nimport { IUser } from '../../../app/types';\nimport { IPost } from '../../types';\nimport styles from './Posts.module.css';\n\nconst filterPosts = (posts: IPost[], user: IUser | null, onlyMy: boolean): IPost[] => {\n  return user && posts.length && onlyMy\n    ? posts.filter(post => post.userId === user.id)\n    : posts;\n};\n\nconst Posts: React.FunctionComponent = observer(() => {\n  const [onlyMy, setOnlyMy] = useState(false);\n\n  const { user } = useUser();\n  const { posts, status } = usePosts(true);\n\n  const onOnlyMyChange = useCallback((event) => setOnlyMy(event.target.checked), []);\n\n  return (\n    <div>\n      <div className={styles.header}>\n        <Title>Posts</Title>\n        {Boolean(user) && (\n          <label>\n            <input type=\"checkbox\" checked={onlyMy} onChange={onOnlyMyChange} />\n            Only my posts\n          </label>\n        )}\n      </div>\n      <PostsList\n        loading={status.loading}\n        posts={filterPosts([...posts.values()], user, onlyMy)}\n      />\n    </div>\n  );\n});\n\nexport default Posts;\n","import store from '../stores/PostsStore';\nimport { useEffect } from 'react';\n\nexport default (fetch?: boolean) => {\n  useEffect(() => {\n    if (fetch) store.fetch().catch();\n  }, []);\n\n  return store;\n};\n"],"sourceRoot":""}