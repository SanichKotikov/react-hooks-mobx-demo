{"version":3,"sources":["app/components/Title/Title.module.css","posts/components/Post/Post.module.css","posts/components/PostsList/PostsList.module.css","posts/routes/Posts/Posts.module.css","app/components/Title/index.ts","app/components/Title/Title.tsx","posts/components/Post/index.ts","posts/components/Post/Post.tsx","posts/components/PostsList/index.ts","posts/components/PostsList/PostsList.tsx","posts/stores/PostsStore/PostsStore.ts","posts/stores/PostsStore/index.ts","posts/stores/PostsStore/services.ts","posts/routes/Posts/Posts.tsx"],"names":["module","exports","root","title","body","post","header","Title","React","memo","_ref","children","react_default","a","createElement","className","styles","Post","observer","classNames","PostsList","posts","fetching","map","components_Post","key","id","PostsStore","services","Object","classCallCheck","this","initializerDefineProperty","_descriptor","_descriptor2","fetchPosts","runInAction","forEach","_this","set","console","log","_context","t0","observable","action","postsStore","client","get","PostsStoreContext","createContext","filterPosts","user","onlyMy","items","Array","from","values","length","filter","userId","Posts","_useState","useState","_useState2","slicedToArray","setOnlyMy","useContext","UserContext","useEffect","fetch","onOnlyMyChange","useCallback","event","target","checked","components_Title","type","onChange","htmlFor","components_PostsList"],"mappings":"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","file":"static/js/posts.2b6563ea.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Title_root__2BL1A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Post_root__1O5J7\",\"title\":\"Post_title__2qNB4\",\"body\":\"Post_body__4XA6I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"PostsList_root__23Sv4\",\"post\":\"PostsList_post__sRbXi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Posts_header__TkvBH\"};","import Title from './Title';\n\nexport default Title;\n","import React from 'react';\nimport styles from './Title.module.css';\n\nconst Title: React.FunctionComponent = React.memo(\n  ({ children }) => (\n    <h1 className={styles.root}>{children}</h1>\n  )\n);\n\nexport default Title;\n","import Post from './Post';\n\nexport default Post;\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport classNames from 'classnames';\nimport { IPost } from '../../types';\nimport styles from './Post.module.css';\n\ninterface IProps {\n  post: IPost;\n  className?: string;\n}\n\nconst Post: React.FunctionComponent<IProps> = observer(\n  ({ post, className }) => (\n    <div className={classNames(styles.root, className)}>\n      <h3 className={styles.title}>\n        {post.title}\n      </h3>\n      <p className={styles.body}>\n        {post.body}\n      </p>\n    </div>\n  )\n);\n\nexport default Post;\n","import PostsList from './PostsList';\n\nexport default PostsList;\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport classNames from 'classnames';\nimport Post from '../Post';\nimport { IPost } from '../../types';\nimport styles from './PostsList.module.css';\n\ninterface IProps {\n  posts: IPost[];\n  fetching: boolean;\n  className?: string;\n}\n\nconst PostsList: React.FunctionComponent<IProps> = observer(\n  ({ posts, fetching, className }) => (\n    <div className={classNames(styles.root, className)}>\n      {posts.map(post => (\n        <Post\n          key={post.id}\n          post={post}\n          className={styles.post}\n        />\n      ))}\n      {fetching && <div>Loading...</div>}\n    </div>\n  )\n);\n\nexport default PostsList;\n","import { observable, action, runInAction } from 'mobx';\nimport { IPostServices } from './services';\n\nclass PostsStore {\n\n  private services: IPostServices;\n\n  @observable fetching = false;\n  @observable posts = observable.map({});\n\n  constructor(services: IPostServices) {\n    this.services = services;\n  }\n\n  @action async fetch(): Promise<void> {\n    try {\n      this.fetching = true;\n      const posts = await this.services.fetchPosts();\n\n      runInAction(() => {\n        posts.forEach(post => this.posts.set(post.id, post));\n        this.fetching = false;\n      });\n    } catch (error) {\n      console.log(error);\n      runInAction(() => this.fetching = false);\n    }\n  }\n\n}\n\nexport default PostsStore;\n","import PostsStore from './PostsStore';\nimport services from './services';\nimport { createContext } from 'react';\n\nconst postsStore = new PostsStore(services);\nexport const PostsStoreContext = createContext(postsStore);\n\nexport default postsStore;\n","import client from '../../../client';\nimport { IPost } from '../../types';\n\nconst fetchPosts = () => client.get('/posts');\n\nexport interface IPostServices {\n  fetchPosts: () => Promise<IPost[]>;\n}\n\nexport default { fetchPosts };\n","import React, { useContext, useEffect, useState, useCallback } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport Title from '../../../app/components/Title';\nimport PostsList from '../../components/PostsList';\nimport UserContext from '../../../app/contexts/UserContext';\nimport { PostsStoreContext } from '../../stores/PostsStore';\nimport { IUser } from '../../../app/types';\nimport { IPost } from '../../types';\nimport styles from './Posts.module.css';\n\nconst filterPosts = (posts: Map<number, IPost>, user: IUser | null, onlyMy: boolean): IPost[] => {\n  let items = Array.from(posts.values());\n\n  return user && items.length && onlyMy\n    ? items.filter(post => post.userId === user.id)\n    : items;\n};\n\nconst Posts: React.FunctionComponent = observer(() => {\n  const [onlyMy, setOnlyMy] = useState(false);\n\n  const user = useContext(UserContext);\n  const postsStore = useContext(PostsStoreContext);\n\n  useEffect(() => { postsStore.fetch() }, []);\n\n  const onOnlyMyChange = useCallback((event) => setOnlyMy(event.target.checked), []);\n\n  return (\n    <div>\n      <div className={styles.header}>\n        <Title>Posts</Title>\n        {!!user && (\n          <div>\n            <input type=\"checkbox\" id=\"own-posts\" checked={onlyMy} onChange={onOnlyMyChange} />\n            <label htmlFor=\"own-posts\">Only my posts</label>\n          </div>\n        )}\n      </div>\n      <PostsList\n        fetching={postsStore.fetching}\n        posts={filterPosts(postsStore.posts, user, onlyMy)}\n      />\n    </div>\n  );\n});\n\nexport default Posts;\n"],"sourceRoot":""}