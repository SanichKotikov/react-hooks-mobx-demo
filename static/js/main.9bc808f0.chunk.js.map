{"version":3,"sources":["webpack:///./src/client.ts","webpack:///./src/app/components/Header/Header.css","webpack:///./src/app/types.ts","webpack:///./src/app/contexts/ThemeContext.ts","webpack:///./src/app/helpers/setTheme.ts","webpack:///./src/app/providers/Theme.tsx","webpack:///./src/app/components/CurrentUser/index.ts","webpack:///./src/app/components/CurrentUser/CurrentUser.tsx","webpack:///./src/app/components/ThemeSelector/ThemeSelector.tsx","webpack:///./src/app/components/ThemeSelector/index.ts","webpack:///./src/app/components/Header/index.ts","webpack:///./src/app/components/Header/Header.tsx","webpack:///./src/app/stores/UserStore/services.ts","webpack:///./src/app/stores/UserStore/UserStore.ts","webpack:///./src/app/stores/UserStore/index.ts","webpack:///./src/posts/routes/Posts/index.ts","webpack:///./src/app/containers/App/index.ts","webpack:///./src/app/containers/App/App.tsx","webpack:///./src/index.tsx","webpack:///./src/app/contexts/UserContext.ts","webpack:///./src/app/containers/App/App.css","webpack:///./src/app/components/ThemeSelector/ThemeSelector.css"],"names":["API_URL","get","url","fetch","then","resp","json","module","exports","uiThemeName","IUser","id","name","createContext","Light","theme","document","documentElement","setAttribute","DEFAULT_THEME","matchMedia","matches","Dark","children","updateTheme","onUpdateTheme","ThemeContext","Provider","value","user","className","THEMES","Object","keys","memo","onChange","root","map","key","button","onClick","UserContext","content","title","side","fetchUser","data","client","services","this","lazy","catch","header","main","fallback","Posts","render","getElementById"],"mappings":"+FAAA,MAAMA,EAAU,uCAMD,KACbC,IALF,SAAsBC,GACpB,OAAOC,MAAMH,EAAUE,GAAKE,KAAKC,GAAQA,EAAKC,W,yBCFhDC,EAAOC,QAAU,CAAC,KAAO,YAAY,QAAU,WAAW,MAAQ,WAAW,KAAO,YAAY,KAAO,c,6DCC3FC,E,2EAAZ,SAAYA,GACV,gBACA,cAFF,CAAYA,MAAW,KAKhB,MAAMC,EAAQ,WACnB,YAAY,CACVC,GAAI,SACJC,KAAM,YCNK,UAAMC,cAA6B,CAACJ,EAAYK,MAAO,SCEvD,MAJf,SAAkBC,GAChBC,SAASC,gBAAgBC,aAAa,QAASH,ICGjD,MAAMI,EACJC,WAAW,gCAAgCC,QACvCZ,EAAYa,KACZb,EAAYK,MAEH,mBAAS,UAAe,SAAES,IACvC,MAAOR,EAAOS,GAAe,mBAASL,GAEhCM,EAAgB,sBAAaV,IACjCS,EAAYT,IACX,IAMH,OAJA,0BAAgB,KACd,EAASA,IACR,CAACA,IAGF,kBAACW,EAAaC,SAAQ,CAACC,MAAO,CAACb,EAAOU,IACnCF,M,qCCtBQ,ECQA,aACb,UAAqB,KAAEM,EAAI,UAAEC,IAC3B,OAAKD,EACE,yBAAKC,UAAW,IAAWA,IAAaD,EAAKjB,MADlC,Q,uBCNtB,MAAMmB,EAASC,OAAOC,KAAKxB,GAOZ,ICXA,EDWA,IAAMyB,MACnB,UAAuB,UAAEJ,EAAS,SAAEK,IAClC,OACE,yBAAKL,UAAW,IAAW,IAAIM,KAAMN,IAClCC,EAAOM,IAAKzB,GACX,4BACE0B,IAAK1B,EACLkB,UAAW,IAAIS,OACfC,QAAS,IAAML,EAAS1B,EAAYG,KAEnCA,Q,uBErBE,ECYA,aACb,UAAgB,UAAEkB,IAChB,MAAMD,EAAO,qBAAWY,EAAA,IACjB,CAAEhB,GAAiB,qBAAWC,GAErC,OACE,4BAAQI,UAAW,IAAW,IAAIM,KAAMN,IACtC,yBAAKA,UAAW,IAAIY,SAClB,yBAAKZ,UAAW,IAAIa,OAAK,QACzB,yBAAKb,UAAW,IAAIc,MAClB,kBAAC,EAAW,CAACd,UAAW,IAAID,KAAMA,KAAMA,IACxC,kBAAC,EAAa,CAACM,SAAUV,U,gVChBtB,OAAEoB,UALjB,W,yCACE,MAAMC,QAAaC,EAAA,EAAO9C,IAAI,YAC9B,OAAO,SAAgBS,EAAOoC,Q,4mBCFhC,MAAM,EAGJ,cAIQ,KAAA3C,MAAQ,IAAY,kCAC1B,MAAM0B,QAAamB,EAASH,YAC5B,YAAY,KACVI,KAAKpB,KAAOA,OANdoB,KAAKpB,KAAO,MAHF,GAAX,K,2BAMO,GAAP,K,4BAQY,ICjBA,MDiBA,EEjBA,MAAMqB,KAAK,IAAM,oC,uBCAjB,ECOA,aAAS,WAKtB,OAJA,oBAAU,KACR,EAAU/C,QAAQgD,MAAM,SACvB,IAGD,yBAAKrB,UAAW,IAAIM,MAClB,kBAACK,EAAA,EAAYd,SAAQ,CAACC,MAAO,EAAUC,MACrC,kBAAC,EAAM,CAACC,UAAW,IAAIsB,SACvB,0BAAMtB,UAAW,IAAIuB,MACnB,yBAAKvB,UAAW,IAAIY,SAClB,kBAAC,WAAQ,CAACY,SAAU,MAClB,kBAACC,EAAK,cCdpB,IAASC,OACP,kBAAC,EAAK,KACJ,kBAAC,EAAG,OAENxC,SAASyC,eAAe,U,oCCX1B,kBAGe,4BAA4B,O,gDCF3ClD,EAAOC,QAAU,CAAC,KAAO,YAAY,OAAS,YAAY,KAAO,YAAY,QAAU,c,uBCAvFD,EAAOC,QAAU,CAAC,KAAO,YAAY,OAAS,e","file":"static/js/main.9bc808f0.chunk.js","sourcesContent":["const API_URL = 'https://jsonplaceholder.typicode.com';\n\nfunction get<T = any>(url: string): Promise<T> {\n  return fetch(API_URL + url).then(resp => resp.json());\n}\n\nexport default {\n  get,\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"_3iUT9uhC\",\"content\":\"kKyHcxd0\",\"title\":\"UiCsmKit\",\"side\":\"_1PRdoG1h\",\"user\":\"_3qb8q7Im\"};","import * as t from 'io-ts';\n\nexport enum uiThemeName {\n  Light = 'light',\n  Dark = 'dark',\n}\n\nexport const IUser = t.readonly(\n  t.interface({\n    id: t.number,\n    name: t.string,\n  })\n);\n\nexport type IUser = t.TypeOf<typeof IUser>;\n","import React from 'react';\nimport { uiThemeName } from 'app/types';\n\ntype IThemeContext = [uiThemeName, (theme: uiThemeName) => void];\nexport default React.createContext<IThemeContext>([uiThemeName.Light, () => {}]);\n","import { uiThemeName } from 'app/types';\n\nfunction setTheme(theme: uiThemeName) {\n  document.documentElement.setAttribute('theme', theme);\n}\n\nexport default setTheme;\n","import React, { useState, useCallback, useLayoutEffect } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport ThemeContext from 'app/contexts/ThemeContext';\nimport setTheme from 'app/helpers/setTheme';\nimport { uiThemeName } from 'app/types';\n\nconst DEFAULT_THEME =\n  matchMedia('(prefers-color-scheme: dark)').matches\n    ? uiThemeName.Dark\n    : uiThemeName.Light;\n\nexport default observer(function Theme({ children }) {\n  const [theme, updateTheme] = useState(DEFAULT_THEME);\n\n  const onUpdateTheme = useCallback((theme: uiThemeName) => {\n    updateTheme(theme);\n  }, []);\n\n  useLayoutEffect(() => {\n    setTheme(theme);\n  }, [theme]);\n\n  return (\n    <ThemeContext.Provider value={[theme, onUpdateTheme]}>\n      {children}\n    </ThemeContext.Provider>\n  );\n});\n","import CurrentUser from './CurrentUser';\n\nexport default CurrentUser;\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport classNames from 'classnames';\nimport { IUser } from 'app/types';\n\ninterface IProps {\n  user: IUser | null;\n  className?: string;\n}\n\nexport default observer<IProps>(\n  function CurrentUser({ user, className }) {\n    if (!user) return null;\n    return <div className={classNames(className)}>{user.name}</div>;\n  }\n);\n","import React from 'react';\nimport classNames from 'classnames';\nimport { uiThemeName } from 'app/types';\n\nimport css from './ThemeSelector.css';\n\nconst THEMES = Object.keys(uiThemeName) as ReadonlyArray<keyof typeof uiThemeName>;\n\ninterface IProps {\n  className?: string;\n  onChange: (theme: uiThemeName) => void;\n}\n\nexport default React.memo<IProps>(\n  function ThemeSelector({ className, onChange }) {\n    return (\n      <div className={classNames(css.root, className)}>\n        {THEMES.map((name) => (\n          <button\n            key={name}\n            className={css.button}\n            onClick={() => onChange(uiThemeName[name] as uiThemeName)}\n          >\n            {name}\n          </button>\n        ))}\n      </div>\n    );\n  }\n);\n","import ThemeSelector from './ThemeSelector';\n\nexport default ThemeSelector;\n","import Header from './Header';\n\nexport default Header;\n","import React, { useContext } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport classNames from 'classnames';\nimport UserContext from 'app/contexts/UserContext';\nimport ThemeContext from 'app/contexts/ThemeContext';\nimport CurrentUser from '../CurrentUser';\nimport ThemeSelector from '../ThemeSelector';\n\nimport css from './Header.css';\n\ninterface IProps {\n  className?: string;\n}\n\nexport default observer<IProps>(\n  function Header({ className }) {\n    const user = useContext(UserContext);\n    const [, onUpdateTheme] = useContext(ThemeContext);\n\n    return (\n      <header className={classNames(css.root, className)}>\n        <div className={css.content}>\n          <div className={css.title}>Demo</div>\n          <div className={css.side}>\n            <CurrentUser className={css.user} user={user} />\n            <ThemeSelector onChange={onUpdateTheme} />\n          </div>\n        </div>\n      </header>\n    );\n  }\n);\n","import * as tPromise from 'io-ts-promise';\nimport client from 'client';\nimport { IUser } from 'app/types';\n\nasync function fetchUser() {\n  const data = await client.get('/users/2');\n  return tPromise.decode(IUser, data);\n}\n\nexport default { fetchUser };\n","import { action, observable, runInAction } from 'mobx';\nimport { IUser } from 'app/types';\nimport services from './services';\n\nclass UserStore {\n  @observable user: IUser | null;\n\n  constructor() {\n    this.user = null;\n  }\n\n  @action fetch = async () => {\n    const user = await services.fetchUser();\n    runInAction(() => {\n      this.user = user;\n    });\n  };\n}\n\nexport default UserStore;\n","import UserStore from './UserStore';\n\nexport default new UserStore();\n","import React from 'react';\n\nexport default React.lazy(() => import('./Posts'));\n","import App from './App';\n\nexport default App;\n","import React, { useEffect, Suspense } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport UserContext from 'app/contexts/UserContext';\nimport Header from 'app/components/Header';\nimport userStore from 'app/stores/UserStore';\nimport Posts from 'posts/routes/Posts';\n\nimport css from './App.css';\n\nexport default observer(function App() {\n  useEffect(() => {\n    userStore.fetch().catch(() => {});\n  }, []);\n\n  return (\n    <div className={css.root}>\n      <UserContext.Provider value={userStore.user}>\n        <Header className={css.header} />\n        <main className={css.main}>\n          <div className={css.content}>\n            <Suspense fallback={null}>\n              <Posts />\n            </Suspense>\n          </div>\n        </main>\n      </UserContext.Provider>\n    </div>\n  );\n});\n","import './index.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Theme from 'app/providers/Theme';\nimport App from 'app/containers/App';\n\nReactDOM.render(\n  <Theme>\n    <App />\n  </Theme>,\n  document.getElementById('root'),\n);\n","import { createContext } from 'react';\nimport { IUser } from 'app/types';\n\nexport default createContext<IUser | null>(null);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"_3k5tutUT\",\"header\":\"_1vmAV5_L\",\"main\":\"_14fSl-DN\",\"content\":\"_3CJIHlpq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"_2oIKar5Z\",\"button\":\"_3L5XS3WE\"};"],"sourceRoot":""}